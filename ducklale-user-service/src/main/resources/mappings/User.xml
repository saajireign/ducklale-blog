<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//ibatis.apache.org//DTD Mapper 3.0//EN"
"http://ibatis.apache.org/dtd/ibatis-3-mapper.dtd">



<mapper namespace="com.ducklale.user.domain.dao.UserDao">

	<!-- 映射结果集 -->
	<resultMap id="userResultMap" type="com.ducklale.user.domain.entity.UserPO">
		<id property="id" column="id" jdbcType="INTEGER"/>
    	<result property="userName" column="user_name" jdbcType="VARCHAR"/>
    	<result property="password" column="password" jdbcType="VARCHAR"/>
    	<result property="mobile" column="mobile" jdbcType="VARCHAR"/>
    	<result property="realName" column="real_name" jdbcType="VARCHAR"/>
    	<result property="nickName" column="nick_name" jdbcType="VARCHAR"/>
    	<result property="birthday" column="birthday" jdbcType="TIMESTAMP"/>
    	<result property="identityNo" column="identity_no" jdbcType="VARCHAR"/>
    	<result property="showingAchievement" column="showing_achievement" jdbcType="VARCHAR"/>
    	<result property="selfIntroduction" column="self_introduction" jdbcType="VARCHAR"/>
    	<result property="removeFlag" column="remove_flag" jdbcType="BIT"/>
    	<result property="qqNo" column="qq_no" jdbcType="VARCHAR"/>
    	<result property="headIconUri" column="head_icon_uri" jdbcType="VARCHAR"/>
    	<result property="achievementPoints" column="achievement_points" jdbcType="INTEGER"/>
	</resultMap>
	
	<!-- 用于select查询公用抽取的列 -->
	<sql id="userColumnList">
	    <![CDATA[
			id,user_name,password,mobile,real_name,nick_name,birthday,identity_no,showing_achievement,self_introduction,remove_flag,qq_no,head_icon_uri,achievement_points
	    ]]>
	</sql>
	
	<!-- 根据主键查询 -->
	<select id="selectById" resultMap="userResultMap"  parameterType="java.lang.Integer">
		SELECT <include refid="userColumnList" />
	    <![CDATA[
	    FROM t_user 
        WHERE 
	        id = #{id,jdbcType=INTEGER}
	    ]]>
	</select>
	
	
	<!-- 根据ID删除 -->
    <delete id="deleteById"  parameterType="java.lang.String">
	    <![CDATA[
	        DELETE FROM t_user 
	        WHERE
	        id = #{id,jdbcType=INTEGER}
	    ]]>
    </delete>
   
  	
  	<!-- 根据参数对象中有值的进行插入-->
	<insert id="insert" parameterType="com.ducklale.user.domain.entity.UserPO" >
		insert into t_user
		<trim prefix="(" suffix=")" suffixOverrides="," >
	     	<if test="id != null" >
		    id,
		  	</if>
	     	<if test="userName != null" >
		    user_name,
		  	</if>
	     	<if test="password != null" >
		    password,
		  	</if>
	     	<if test="mobile != null" >
		    mobile,
		  	</if>
	     	<if test="realName != null" >
		    real_name,
		  	</if>
	     	<if test="nickName != null" >
		    nick_name,
		  	</if>
	     	<if test="birthday != null" >
		    birthday,
		  	</if>
	     	<if test="identityNo != null" >
		    identity_no,
		  	</if>
	     	<if test="showingAchievement != null" >
		    showing_achievement,
		  	</if>
	     	<if test="selfIntroduction != null" >
		    self_introduction,
		  	</if>
	     	<if test="removeFlag != null" >
		    remove_flag,
		  	</if>
	     	<if test="qqNo != null" >
		    qq_no,
		  	</if>
	     	<if test="headIconUri != null" >
		    head_icon_uri,
		  	</if>
	     	<if test="achievementPoints != null" >
		    achievement_points,
		  	</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides="," >
	     	<if test="id != null" >
		    #{id,jdbcType=INTEGER},
		  	</if>
	     	<if test="userName != null" >
		    #{userName,jdbcType=VARCHAR},
		  	</if>
	     	<if test="password != null" >
		    #{password,jdbcType=VARCHAR},
		  	</if>
	     	<if test="mobile != null" >
		    #{mobile,jdbcType=VARCHAR},
		  	</if>
	     	<if test="realName != null" >
		    #{realName,jdbcType=VARCHAR},
		  	</if>
	     	<if test="nickName != null" >
		    #{nickName,jdbcType=VARCHAR},
		  	</if>
	     	<if test="birthday != null" >
		    #{birthday,jdbcType=TIMESTAMP},
		  	</if>
	     	<if test="identityNo != null" >
		    #{identityNo,jdbcType=VARCHAR},
		  	</if>
	     	<if test="showingAchievement != null" >
		    #{showingAchievement,jdbcType=VARCHAR},
		  	</if>
	     	<if test="selfIntroduction != null" >
		    #{selfIntroduction,jdbcType=VARCHAR},
		  	</if>
	     	<if test="removeFlag != null" >
		    #{removeFlag,jdbcType=BIT},
		  	</if>
	     	<if test="qqNo != null" >
		    #{qqNo,jdbcType=VARCHAR},
		  	</if>
	     	<if test="headIconUri != null" >
		    #{headIconUri,jdbcType=VARCHAR},
		  	</if>
	     	<if test="achievementPoints != null" >
		    #{achievementPoints,jdbcType=INTEGER},
		  	</if>
		</trim>
	</insert>
	
	
	<!-- 根据ID进行更新 -->
	<update id="updateById"  parameterType="com.ducklale.user.domain.entity.UserPO">
		update t_user
		<set>
			<if test="id != null" >
			 id = #{id,jdbcType=INTEGER},
			</if>
			<if test="userName != null" >
			 user_name = #{userName,jdbcType=VARCHAR},
			</if>
			<if test="password != null" >
			 password = #{password,jdbcType=VARCHAR},
			</if>
			<if test="mobile != null" >
			 mobile = #{mobile,jdbcType=VARCHAR},
			</if>
			<if test="realName != null" >
			 real_name = #{realName,jdbcType=VARCHAR},
			</if>
			<if test="nickName != null" >
			 nick_name = #{nickName,jdbcType=VARCHAR},
			</if>
			<if test="birthday != null" >
			 birthday = #{birthday,jdbcType=TIMESTAMP},
			</if>
			<if test="identityNo != null" >
			 identity_no = #{identityNo,jdbcType=VARCHAR},
			</if>
			<if test="showingAchievement != null" >
			 showing_achievement = #{showingAchievement,jdbcType=VARCHAR},
			</if>
			<if test="selfIntroduction != null" >
			 self_introduction = #{selfIntroduction,jdbcType=VARCHAR},
			</if>
			<if test="removeFlag != null" >
			 remove_flag = #{removeFlag,jdbcType=BIT},
			</if>
			<if test="qqNo != null" >
			 qq_no = #{qqNo,jdbcType=VARCHAR},
			</if>
			<if test="headIconUri != null" >
			 head_icon_uri = #{headIconUri,jdbcType=VARCHAR},
			</if>
			<if test="achievementPoints != null" >
			 achievement_points = #{achievementPoints,jdbcType=INTEGER},
			</if>
		</set>
		where
			id = #{id,jdbcType=INTEGER}
	</update>
</mapper>

